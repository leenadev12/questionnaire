<div class="wrapper">
  <div>
    <h1 class="mat-h1">Unanswered Question</h1>
    <div class="card" *ngFor="let question of questionList | sortByTime: 'createdDate'; let i = index">
      <mat-card *ngIf="!question.isAnswered">
        <mat-card-title>
          {{question.questionType === 'open' ? 'Open' : question.questionType === 'singleSelect'? 'Single Choice' : 'Multi Choice'}} Question
        </mat-card-title>
        <mat-card-content>
          <p>{{question.text}}</p>
          <mat-form-field *ngIf="question.questionType === 'open'" appearance="outline" class="title-input">
            <mat-label>Answer</mat-label>
            <textarea matInput cdkTextareaAutosize #textAnswer="ngModel" required [(ngModel)]="question.answer"></textarea>
          </mat-form-field>

          <div *ngIf="question.questionType !== 'open'">
            <label>Options:</label>
            <br>
            <mat-radio-group>
              <ng-container *ngFor="let option of question.options; let optionIndex=index;">
                <mat-radio-button ngDefaultControl #singleSelectAnswer="ngModel" required [value]="optionIndex" [(ngModel)]="option.checked" *ngIf="question.questionType === 'singleSelect'" (onchange)="question.answer = 'dummy'">
                  {{ option.optionText }}
                </mat-radio-button>
                <mat-checkbox [(ngModel)]="option.checked" #multiSelectAnswer="ngModel" required *ngIf="question.questionType === 'multiSelect'">
                  {{ option.optionText }}
                </mat-checkbox>
                <br>
              </ng-container>
            </mat-radio-group>
          </div>

        </mat-card-content>
        <mat-card-actions >
          <button mat-button color="primary" (click)="onSaveAnswer(i)">
            <mat-icon>save</mat-icon>Save Answer
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
  <div class="vl"></div>
  <div>
    <h1 class="mat-h1">Answered Question</h1>
    <div class="card" *ngFor="let question of questionList | sortByTime: 'answeredDate'; let i = index">
      <mat-card *ngIf="question.isAnswered">
        <mat-card-title>
          {{question.questionType === 'open' ? 'Open' : question.questionType === 'singleSelect'? 'Single Choice' : 'Multi Choice'}} Question</mat-card-title>
        <mat-card-content>
          <p>{{question.text}}</p>
          <mat-form-field *ngIf="question.questionType === 'open'" appearance="outline" class="title-input">
            <mat-label>Answer</mat-label>
            <textarea matInput cdkTextareaAutosize [(ngModel)]="question.answer"></textarea>
          </mat-form-field>

          <div *ngIf="question.questionType !== 'open'">
            <label>Options:</label>
            <br>
            <mat-radio-group>
              <ng-container *ngFor="let option of question.options; let optionIndex=index;">
                <mat-radio-button ngDefaultControl [value]="optionIndex" [checked]="option.checked" [(ngModel)]="question.answer" *ngIf="question.questionType === 'singleSelect'">
                  {{ option.optionText }}
                </mat-radio-button>
                <mat-checkbox [(ngModel)]="option.checked" *ngIf="question.questionType === 'multiSelect'">
                  {{ option.optionText }}
                </mat-checkbox>
                <br>
              </ng-container>
            </mat-radio-group>
          </div>

        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary" (click)="onRevertAnswer(i)">
            <mat-icon>refresh</mat-icon>Revert Answer
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>